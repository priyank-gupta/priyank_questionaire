
<% unless params[:id].blank? %>
  <% (1..4).each do |index| %>
    <% if @question.options[index-1] %>
      <%= text_field_tag "question[options_attributes][#{index}][body]", @question.options[index-1].body %>&nbsp;&nbsp;&nbsp;&nbsp;
      <%= radio_button_tag 'question[answers_attributes][1][body]', value = index %>
      <%= hidden_field_tag "question[options_attributes][#{index}][id]", @question.options[index-1].id %>
      <%= hidden_field_tag "question[options_attributes][#{index}][_destroy]", false %><br/>
    <% else %>
      <%= text_field_tag "question[options_attributes][#{index}][body]" %>&nbsp;&nbsp;&nbsp;&nbsp;
      <%= radio_button_tag 'question[answers_attributes][1][body]', value = index %><br/>
    <% end %>
  <% end %>
  <% @question.answers.each_with_index do |answer, index| %>
    <% if index == 0 %>
      <%= hidden_field_tag 'question[answers_attributes][1][id]', answer.id %>
      <%= hidden_field_tag 'question[answers_attributes][1][_destroy]', false %>
    <% else %>
      <%= hidden_field_tag "question[answers_attributes][#{index+1}][id]", answer.id %>
      <%= hidden_field_tag "question[answers_attributes][#{index+1}][_destroy]", "1" %>
    <% end %>
  <% end %>
  
<script>

  if( "<%= params[:type] %>" == "Multiple Choice") {
  
    for(var i = 1; i<=4; i++) {
      var option = document.getElementById("question_options_attributes_"+i+"_body");
      if (option.value == "<%= @question.answers.first.body %>") {
        var val = option.id.slice(-6,-5);
        var id = "question_answers_attributes_1_body_"+val;
        document.getElementById(id).checked = true;
        break;
      }
    }
  }

</script>
 
<% else %>
  <% (1..4).each do |index| %>
    <%= text_field_tag "question[options_attributes][#{index}][body]" %>&nbsp;&nbsp;&nbsp;&nbsp;<%= radio_button_tag 'question[answers_attributes][1][body]', value = index, (index == 1) %><br/>
  <% end %>
<% end %>


